---
const today = new Date();
import { Image } from 'astro:assets';
import { IMAGE_URL } from '../consts';
import logoImage from '../../public/logo/logo-geeker-green.png';
import { getAllCategories, getLatesPosts } from '../lib/api';
import FormattedDate from './FormattedDate.astro';

const AllCategories = await getAllCategories();
const LatesPosts = await getLatesPosts(3);
---

<footer>
	 <!-- Footer Start -->
	 <div class="container-fluid bg-dark footer py-5">
		<div class="container py-5">
			<div class="row g-5">
				
				<div class="col-lg-6 col-xl-6">
					<div class="footer-item-2">
						<div class="d-flex flex-column mb-4 text-start">
							<h4 class="mb-4 text-white">Most recent</h4>
							{
								LatesPosts.map((post: any) => (
									<a href={`/blog${post.absolute_url}`} title={post.title_en}>
										<div class="d-flex align-items-center mt-3">
											<div class="rounded-circle border border-2 border-primary overflow-hidden">
												<img src={`${IMAGE_URL}${post.image}`} class="img-zoomin img-fluid rounded-circle" style="width: 100px !important; height: 100px !important;" alt={post.title_en}>
											</div>
											<div class="d-flex flex-column ps-4">
												<p class="text-uppercase text-white mb-3">{post.category.name}</p>
												<a href={`/blog${post.absolute_url}`} class="h6 text-white">
													{post.title_en.slice(0, 40)}...
												</a>
												<small class="text-white d-block"><i class="fas fa-calendar-alt me-1"></i> 
													<span style="margin-left: 3px;">
														{
															post.posted.toDateString === today.toDateString ?
															'Today'
															:
															<FormattedDate date={post.posted} />
														}	
													</span>
												</small>
											</div>
										</div>
									</a>
								))
							}
						</div>
					</div>
				</div>
					
				<div class="col-lg-6 col-xl-6">
					
					<div class="d-flex flex-column text-start footer-item-3">
						<h4 class="mb-4 text-white">Categories</h4>
						{
							AllCategories.map((category: any) => (
								<a href={`/category/${category.slug}`} class="btn-link text-white">
									<i class="fas fa-angle-right text-white me-2"></i> 
									{category.name_en}
								</a>
							))
						}
					</div>
						
				</div>
			</div>
		</div>
	</div>
	<!-- Footer End -->
	<!-- Copyright Start -->
	<div class="container-fluid copyright bg-dark py-4">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-md-6 d-flex align-items-center text-center text-md-start mb-3 mb-md-0">
					<div><Image src={logoImage} alt="logo geekzone" width={40} /></div>
					<div class="text-light mx-3 fs-3 fw-bold">Geekzone</div>
				</div>
				<div class="col-md-6 text-center text-md-end mb-3 mb-md-0">
					<span class="text-light"> &copy; geekzone, All rights reserved.</span>
				</div>
			</div>
		</div>
	</div>
	<!-- Copyright End -->


	<!-- Back to Top -->
	<a href="#" class="btn btn-primary border-2 border-white rounded-circle back-to-top text-white d-flex align-items-center justify-content-center"><i class="fa fa-arrow-up"></i></a>


	<!-- Customs Librairies -->
	<script src="../scripts/main.js"></script>
	<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script is:inline src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.2/dist/sweetalert2.all.min.js"></script>
	</script><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="../scripts/easing/easing.min.js"></script>
	<script src="../scripts/waypoints/waypoints.min.js"></script>
	<script src="../scripts/owlcarousel/owl.carousel.min.js"></script>

</footer>
